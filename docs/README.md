# 職務経歴書

## 基本情報

|項目名|内容|
|----|----|
|名前|合瀬 雄紀|
|居住地|神奈川県|
|最終学歴|早稲田大学 社会科学部|
|資格|RubySilver, 基本情報技術者, 応用情報技術者, AWS SAA|

## 職務要約

顧客の課題に向き合い、要件定義から設計、テスト、運用を担当。

プロジェクト達成に必要な調整はチームの垣根を超えてワンチームを意識。

顧客からの意見を吸い上げ、より良い形でプロダクトに落とし込むために素早いPDCAサイクルを回すことを意識しています。

## バリューを発揮しやすい業務

- 関係者を巻き込んだ要求・要件定義の整理
- 本質的な顧客の課題解決に向けた設計・開発・テスト

## バリューを発揮しやすい環境

- 解決手段にとらわれることなく、顧客の課題やプロダクトの提供価値に向き合っている
- 仕事の領域を制限せず、ユーザーストーリー達成のために必要なアクションを行えるチーム
- 気軽に雑談できる心理的安全性の高いチーム

## 意欲・興味

- 堅牢性とパフォーマンスの両軸を意識した実装の模索
- 顧客体験に実現に必要なインフラ構成の模索

## スキル

### 開発手法

スクラム開発・チケット駆動開発

### 言語

Ruby・Python・PHP・TypeScript・JavaScript

### フレームワーク・ライブラリ

Ruby on Rails・FastAPI・Laravel・React・Next.js・Vue・Nuxt.js

### 通信プロトコル

REST

### RDB

MySQL・PostgreSQL

### クラウド

#### AWS

Aurora・CloudWatch・ECR・ECS・Fargate・IAM・Lambda・S3

#### Google Cloud

BigQuery

### SaaS/PaaS

GitHub・GitHub Actions

### その他

Docker・OpenAPI・Playwright・RSpec・Terraform

## 技術関連記事

- [Qiita](https://qiita.com/yuuki_0524)
- [Zenn](https://zenn.dev/ooooose)
- [note](https://note.com/ooooonse0524)

## 職務経歴

### 不動産Saas運営スタートアップ企業

#### 雇用形態

正社員

#### 在籍期間

2024/08/01 ~ 現在

#### プロダクトが属する業界

不動産売買

#### サービス概要
不動産売買の営業支援ツールとして自社で展開しているSaaSサービスの改善や問い合わせ対応、新機能実装をメインに担当しています。
具体的には不動産営業の担当者が長期的に追客中の売主・買主の顧客に対して、所有物件の周辺売出し状況レポートの作成や購入希望者（買主顧客）に対して物件提案を自動化することを実現します。
またCRMとしての側面もあり、メール・メッセージ機能や営業記録などの顧客との関係性を強化する機能も搭載しており、メール・自動提案の閲覧状況から売買の温度感が高い顧客も一覧で把握できるようなツールとなっており、バックエンド・フロントエンドの分けなく実装を担当をしております。


【使用技術】
- Ruby + Ruby on Rails
- Vue.js + Nuxt
- CI/CD: Github Actions
- インフラ: AWS（ECS・ALB・RDS・S3・CloudFront・CloudWatchなど）
- 分析: BigQuery、redash

#### 担当した新規機能開発プロジェクト

運用保守以外に以下の新規機能実装に参画しました。
【CRM機能強化、顧客詳細画面UI大幅アップデート（テスト期間から参画）】
- CRMとしての機能を強化するために顧客詳細画面のUIを大幅に改修するプロジェクトにテストの段階から参画。
  - テスト仕様書で抜け漏れがないかを確認、全体的に実施しバグを特定し改修まで担当。

【土地・戸建て物件の学区検索機能追加】
- サービス内物件の絞り込み検索機能としてマンションのみに実装されていた学区検索を土地・戸建てにも拡張
  - 既存実装を参考にElasticSearchを用いた学区情報のオートコンプリート機能を実装。入力された文字列から候補となる学校名を即座に返すインターフェースを実現しました。
  - 物件を学区で検索して不動産売買担当者から買主顧客に対して自動提案できる機構を実装。
  - 定期的にエリア更新される学区情報をアプリ内でも更新する必要があるため、CSV形式の学区情報をS3にアップロードし、解析してDBを更新するバッチを作成。管理画面から起動するインターフェースを構築しました。
  - テスト仕様書の作成と実施体制の構築まで対応。

【媒介契約汎用化プロジェクト】
- 特定の企業に提供していた媒介契約管理機能を汎用的に提供するための実装を担当。
- 営業担当者から担当顧客に対してポータルサイトごと（SUUMO、Home'sなど）の物件情報閲覧数などの数値情報を報告できる機構を構築
  - 入力フォーマットにはエクセルのようにキーダウンで操作・入力し、表に直接入力し保存できるUIを実装。
  - エクセルのような入力インターフェースとして検討したUIライブラリは全て有料で且つデザイン上の融和性が低いものであったため、使用せず一からフルスクラッチで構築。キーダウン操作は限定的ではありますが、ストレスなく入力できるUIをNuxt.jsで実現しました。
  - 営業担当者が入力するテーブルと顧客に表示するために参照するテーブルを分けることで、保存と公開という段階をわけて管理できるよう設計しています。

### 反響取込み強化プロジェクト（外部サイトへのクローリング機構）
不動産会社がSUUMOやAtHomeなどのポータルサイトに掲載する物件に対して、顧客から資料請求などのアクションがあった場合に自動でアプリに顧客情報や希望条件を取り込む処理（反響取込み処理）を強化し、サービスへの円滑な顧客登録と自動追客の強化を担当しました。
通常route53におけるドメイン設定とsendgridのInbound parseを利用し、反響時ポータルサイトから送信されるメールを取り込み、メールの内容を解析することで顧客情報を登録し追客設定をしているのですが、このプロジェクトではメールに記載されたURLのログイン処理をしないと情報が見れないポータルサイトの取り込む必要があり、メール受信から記載のURLを元に外部サイトへのクローリング処理など新たな取り込み基盤を構築しました。
要件整理から実装、QAなども含めて1人メインで対応しました。


- python（playwright）を使用したクローラー処理とDBの読み込み・書き込み処理の実装
- クローラー実行のインフラ環境構築
  - terraformによるタスク実行用のECSやALBなどの構築、CI/CDも専用に実装しました。
  - 企業のID・Passwordを預かる必要があり、zyteAPIなどの外部サービスを利用するのではなく自社のインフラで完結可能な方法を模索しました。検討した結果、public ipを付与したECSタスクでの実行を選択しております。
（lambdaはリトライも含めると実行時間が読めなかったため、ECSを採用しました）

### 受託開発企業

【雇用形態】

正社員

【参画期間】

2023/06 ~ 2024/07（1 年間）

#### 在日外国人従業員のためのヘルケアサービス

# 在日外国人従業員のためのヘルケアサービス（追加機能実装）
## サービス概要と現状の課題
日本企業で働く外国人従業員の健康診断など企業で行うべきヘルスケアの予約管理をサポートするサービスです。
私がジョインした当初、企業担当者しか各外国籍従業員の予約管理を行なえない仕様でしたが、企業ごとの外国人労働者の増加に伴い、予約作業などの管理業務が担当者にとって負担になるという課題が浮き彫りになりました。

## 課題に対する解決策
上記課題に対して、従業員もログインできて個人で予約管理ができる仕様にするという対応を提案し実装しました。
そのため、登録企業が各従業員を受け入れるインターフェースを用意する必要があります。
実装上の要件として、従業員が他の企業と紐づかないようにしなければならないといったことが特に重要になります。
以下の順序で段階を踏み従業員と企業を紐づける流れを整理しました。

-  企業ごと設定画面から従業員の受入設定を行い、従業員ログイン画面を生成、従業員にURLを共有する。
- 従業員は共有されたURLの画面からメールアドレスを入力。その後、メール認証およびワンタイムパスワード認証の２段階認証を実施する。
- 基本情報登録をしたのちに企業に対して登録申請ができ、企業担当者側が受理すれば企業との紐付けが完了する。

## 実装内容
私は以下の内容を実装しました。
- 新規機能開発に関する全体的なDB設計とテーブル作成
- 管理画面の従業員受入設定機能・画面の実装
- 従業員ログイン画面の実装
- 従業員による2段階認証（メール認証とワンタイムパスワードによる認証）
- 認証後のユーザー登録機能、画面
- その他、以下言語やライブラリなどのバージョンアップやリプレイス作業を対応しました。
  - PHP8.1から8.3.3へ
  - Vue2からVue3へアップデート
  - `webpack`から`vite`への移行


## チーム情報
実際にはフロント・バックエンド分けなく実装はしておりましたが、サーバーサイドエンジニアとしてジョインしております。

PM（1名）
リードエンジニア（2名）
サーバーサイド（2名）
QAチーム（2名）

## 実装詳細
### 各種ライブラリのバージョンアップやビルドツールのリプレイス
- PHPのバージョンを8.1から8.3.3にアップデートし、引数の型を秘匿できる`SenstiveParameter`を利用しました。
- webpackではVueのコンパイルに時間がかかっており開発に影響があったため、Viteに移行しました。
  - 一部挙動しないJSファイルの修正なども追加で対応。
- Vue2からVue3への移行。

### 管理担当者による従業員受入設定（設定すると従業員ログイン画面のURLが発行）
- 従業員に対して企業ごとのログイン画面を開くために必要な設定（受入最大人数など）
- URLを発行し表示するインターフェースを実装、クリックすればコピーできる仕様にしました。

### 従業員登録申請画面の実装】
- 企業ごとの登録申請ページを実装、クエリパラメータにハッシュ化された情報を元にバックエンドで企業を識別し、フロントにロゴなどを表示する実装をしました。
- メールアドレス入力後に発行したワンタイムパスコードと入力画面のURLを添付したメール送信機能を実装。

【従業員による2段階認証（メール認証とワンタイムパスワードによる認証）】
- 従業員による登録申請時に２段階認証を実施することで誤って他の企業に紐付けられることを防止しました。
  - 登録申請画面にて入力されたメールアドレス宛に6桁の数字とパスコードを入力する認証ようURLを添付したメールを送信する処理を実装しました。
  - ６桁の数字を入力する画面では5回失敗したらロックをかける処理を実装し、辞書型攻撃の対策をしました。
- パスコード入力画面はVueを用いて実装し、半角数字を入力すると次のinputタグに遷移する滑らかなUIを実現しました。
- ワンタイムパスコード入力画面のテストはiphoneやandroidなど幅広いデバイスでのテストを実施し、機能検証・修正を行いました。

【認証後のユーザー登録機能、画面】
- ２段階認証後は従業員の基本情報を入力する画面とテーブルに保存する機能を実装。
- 完了すると管理者に対して登録申請されメール通知される機能を実装しました。

【学んだこと/次に活かせること】
1. セキュリティを考慮した実装
  - 秘匿情報を管理する上で実装上留意すべき点や実装などが身につきました。
  - パスワード認証などの基本的なロジックを参照しながらセキュリティを意識した実装ができます。

2. 保守性・堅牢性を意識した実装
  - 型を定義して、秘匿するといった保守性・堅牢性を意識した実装ができます。
  - DDDに則り、層を細かく分けることで運用保守性に優れたデザインパターンでの実装ができます。

3. UI/UXを意識し、仕様にはない提案と実装
  - 仕様を把握する中で、UI /UX上自分があったら嬉しいと思う機能は積極的に提案し実装することができます。

#### アルバイト情報のAIレコメンドシステム

# プロジェクト概要
アルバイト情報などの検索アプリにおいて、ChatGPTと会話形式でレコメンドしてくれる機能を実装する案件に途中からジョインしました。
主にAPIエンドポイントの実装をメインに行なったほか、急遽検証環境で発生したバグの対応や、GithubActionsにおけるCIチェックの不備などの修正対応を行なっておりました。
その過程でインフラチームやQAチームと幅広い連携を取ることを意識し、スムーズな開発の実現を心がけました。

# チーム情報
発注元企業からも複数名エンジニアがジョインしていましたが、以下内訳は自社メンバーの内訳となっております。
- PM（2名）
- フロントエンド（1名）
- サーバーサイド（10名）
- インフラ（1名）
- QAチーム（2名）

### 仕様に基づいたエンドポイントの実装（対応業務①）
【概要】
ChatGPTに対してアクセスし適切な回答を生成するAPIは別にあり、フロントとの繋ぎ込みに必要なAPIエンドポイントの実装に携わりました。

【実装内容詳細】
- エンドポイントの実装（条件検索系・ユーザー情報更新系など）
- テストコードの実装

【進め方について】
クリーンアーキテクチャを意識したディレクトリ構成で、責務を意識した実装を心がけました。
また、仕様について不明点があれば先方と密に連絡を取ることを心がけ、早さだけでなく丁寧に実装することを意識しました。結果として、後から発覚する仕様との齟齬を最小限に抑えることができたと考えています。
基本的には開発業務として携わったのはエンドポイントの実装とそれに対するテスト実装のみではありましたが、以下業務の対応も行いました。

###  GithubActionsのワークフローの修正（対応業務②）
【概要】
開発の途中で、ローカルのLintは通るが、GithubActions上では12個ほどエラーが発生してしまうという事象が発生。その修正を対応いたしました。

【実装内容詳細】
- GithubActionsのワークフローの修正

【進め方について】
GithubActions上で発生するエラーをローカルでも再現するために以下のバージョンを統一しましたが、再現できませんでした。
- python`3.14`-> `3.17`
- pyright`latest` -> `1.1.329`

開発業務も滞る可能性があったため、ローカルでのエラー再現は断念し、ローカルのDocker環境と同様の環境をGithubActionsでも構築することでエラーを解消しました。
具体的には、ワークフローの中でも`docker-compose build`をすることでローカルのDocker環境をそのまま使用し、環境の差異を解消いたしました。
結果として開発作業も再開し、オンスケでの開発に貢献できたと思います。

# Lintライブラリを`pyright`から`mypy`にリプレイス（対応業務③）
【概要】
リードエンジニアの方から、使用しているLintライブラリを主要エンドポイントリポジトリに合わせるため、`pyright`から`mypy`にリプレイスして欲しいという要望があり対応いたしました。

【実装内容詳細】
- `pyright`のアンインストールと`mypy`のインストール
- `mypy`の指摘によるLintエラー解消（約700箇所）

【進め方について】
`poetry`を使用しておりましたので、まずは`mypy`のインストールを行い、lint実行のコマンドとして使用していたMakeコマンドを修正いたしました。
その後、実行に伴い発生したLintエラー700個を地道に解消しました。
最終的にはGithubActionsのワークフローも若干修正し、3日ほどでリプレイスは完了いたしました。


# プロンプトのプラットフォームアプリの開発

ChatGPTをはじめとしたAIの台頭がありつつ、プロンプトをうまく作成できないユーザーが多いのではないかという仮説から、より良いプロンプトを投稿・閲覧できるプラットフォームサービスを立ち上げるプロジェクトにジョインしました。
あらゆる場面を想定した有益なプロンプトが幅広いユーザーによって作成、閲覧できるようなアプリを作成しております。
# チーム情報
- PM（1名）
- フロントエンド（3名）
- サーバーサイド（5名）
- インフラ（1名）

# フロント側の環境構築（開発業務①）
【概要】
PCブラウザに表示するアプリを検討していたため、高いUI/UXを実現することを目指し、Nextjsを導入しました。コード保守性の観点からTypeScriptによる実装を行いました。
その中で私はフロントエンドの開発に必要な環境構築全般を担当いたしました。

【開発・実装内容詳細】
以下開発に必要な環境を整備いたしました。
- Next13（TypeScript）の環境構築
- ESLint・Prettierの設定
- GithubActionsを用いたCI環境の構築（Lintチェックの実行のみ）
- ライブラリの選定（こちらはメンバーと相談し導入し、使用できる設定をメインに行いました。）

【進め方について】
必要な環境構築を実施したほかに、メンバーの要望の中に環境のコンテナ化もありましたので、対応をいたしました。
不要ではないかという意見も多かったですが、開発環境の迅速な立ち上げにも寄与するという観点と対応に時間がかからなかったため対応しました。


また、その他にも必要なセットアップ全般を担当しました。
特にESLint・Prettierの設定は優先度が高く、他の自社開発アプリでは導入が遅れたことに伴いデグレが発生するといったインシデントが発生したため、優先度高く、環境構築後に導入・設定をしました。


また、各自一つのコマンドでESLintのチェックとPrettierの実行ができるよう、`package.json`の記載を工夫し、合わせて頻出コマンドをMakefileにまとめるなど行いました。

そして、各自PR作成時にCIチェックを走らせるため、GithubActionsによるLintのワークフローも設定いたしました。

最後に、ライブラリの設定は状態管理ツールとして`TanStackQuery`と`Recoil`を導入し、必要なセッティングを行ったほか、UIコンポーネントは使用しやすく綺麗なUIが実現できると考え、ChakraUIを導入しました。


当初エンジニアとして勤務し始めて3ヶ月程度だったので不備も多少あったかと思いますが、メンバーが開発しやすい環境づくりに貢献できたかと思います。

# Firebaseを用いたGoogle・MicroSoft認証機能の実装（開発業務②）
【概要】
Firebaseを活用したGoogle認証とMicroSoft認証をメインのログインとして実装。

【どのような機能の開発・実装か】
認証は主に2つでしてGoogleアカウントによる認証、もしくはMicroSoftアカウントによる認証に絞りました。認証情報を自前のシステムで管理するのではなく、Firebaseを使用することでセキュリティリスクを低減させることを目指しております。

【実装の流れ】
- ボタンを押下したタイミングで認証情報をFirebaseから取得するようアクセスします。
- 取得後バックエンド（FastAPI）にアクセスし、ユーザー情報の有無を確認、存在しなければユーザーとしてデータを作成します。
- 一方フロントでは、取得した情報をRecoilによりGlobalStateとして設定・管理します。
- ヘッダーであったり、ユーザー情報はRecoilから引用することで各コンポーネントから呼び出せるようフックを実装しました。
- 最後に、ログイン後のAPI通信時においてヘッダーに認証情報を載せる必要があるので、Axiosのインターセプターを使用したフックを作成しました。

## 社内用チャットボットアプリの開発
### 開発背景
社内情報について回答する自社専用GPTアプリを開発しました。
手動で社内情報を入力する他にも、GoogleDriveなどと連携することで自社情報を容易に読み込むことも可能です。
社内情報をドキュメントでまとめている場合、それを参照するまで時間的コストがかかります。
これらの社内情報を読み込み、チャット形式で問い合わせることで即座に回答してくれるアプリがあれば、従業員の業務効率化が実現できる可能性が高いことから自社サービスとしての開発に至りました。

### チーム構成
- PM 1名
- バックエンド10名
- フロントエンド5名
- インフラ1名

### 使用技術・開発環境
- Python・FastAPI
- Dart・Flutter
- MySQL
- Docker、docker-compose
- GitHub, GithubActions
- AWS

私はバックエンドの業務を担当していたため、FastAPIによる開発（エディタは`PyCharm`と`vim`）を行なっておりました。
## 取り組んだ課題
### 開発当時の課題
当時のアプリは入力するデータは手動で入力しないといけない状況で、GoogleDriveやNotionなどのSaas連携は開発が進んでいない状況した。
理想としてはGoogleDriveやNotionの連携ボタンを押せば、必要な情報がテキスト化され、ChatGPTに流し込まれることを想定しており、私は当時Notion連携を担当しておりました。
実装にあたり直面した課題は大きく以下2つでした。
- NotionAPIはDatabase、Page、Blockという大まかに3つの単位があり、読み込み方が複雑である。
- 大量のデータが存在し読み込むまでに時間がかかる、もしくは途中で失敗する。（メモリオーバー）

それぞれ以下のように解決に導きました。
### NotionAPIのデータフェッチ（開発業務①）
NotionAPIのデータ構造は、Database、Page、Blockという3つの要素が複雑にネストされており、どのように取得するかが課題でした。
検討した結果、まずユーザーに紐づくDatabaseを全取得し、Databaseに紐づくPage、Pageに紐づくBlockという順序でDatabase、Page、Blockを1つの単位として取得する実装をしました。

### メモリオーバーへの対策（開発業務②）
企業のNotionAPIには大量のデータが保有されており、処理が重く途中で失敗するという課題がありました。そのため、処理が途中で失敗することを前提とした実装をしました。
具体的には、NotionAPIからフェッチしたJSONに含まれる`next_cursor`を保存するテーブルを別途作成しました。
そうすることで、仮に処理が途中で失敗した場合でも保存している最新の`next_cursor`を呼び出しデータフェッチすることでデータ取得処理を再開することが可能になります。
　
途中でアサインが変わってしまいましたが、現在リリースしており、逐次ブラッシュアップを継続しているプロダクトになります。